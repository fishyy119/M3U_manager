# m3u_match_edit
#### 使用版本：Python 3.11.5
## 问题背景
.m3u存储一系列歌曲路径作为歌曲列表如下：  
![sample_1](img/sample_1.png)  
当其中的文件夹名称更改后，该列表会因无法自动更新而失效：  
![sample_2](img/sample_2.png)
本脚本通过匹配歌曲在m3u文件中存储的路径与实际文件夹中的路径，实现m3u文件的自动更新。

## 基本假设
1. **歌曲的名称没有被更改**  
  
  本脚本根据歌曲文件名作为匹配的关键字，因此本脚本的正常运行依赖于歌曲的文件名没有被更改这一基本假设。不符合此假设会导致功能无法实现。  

2. **在音乐库中的音乐文件，不存在重名情况**  
  
  在不符合此假设的情况下，脚本会错误匹配名称相同的两首歌曲，每运行一次脚本，会导致两者路径的互换。  
  对于极少量的重名歌曲，手工操作即可。  

## 程序说明
### setting.json
程序初次运行生成此文件，其中包含了需要配置的**音乐库路径**与**m3u文件存储目录**
### LoadFileTree.py
扫描音乐库路径，生成包含全部歌曲的树状目录，以`file_tree.json`文件存储。  
扫描m3u文件目录，有m3u中的歌曲路径生成另一个树状目录，以`file_tree_m3u.json`文件存储。  
以歌曲名为关键词匹配两个树状目录，生成新旧路径的映射规则，以`map.json`文件存储。
### M3Uedit.py
根据`map.json`文件，自动m3u文件中的路径更新


   




